<!DOCTYPE html>

<html ng-app="doctorApp">

<head>

<title>דוקטור תציל אותי</title>

<script src="./js/angular.js"> </script>
<script src="./js/angular-animate.js"> </script>
<script src="./js/angular-aria.js"> </script>
<script src="./js/angular-messages.js"> </script>
<script src="./js/angular-route.js"> </script>
<script src="./js/angular-material.js"> </script>
<script src="./js/app.js"> </script>
<script src="./js/angular-resource.js"> </script>
<script src="./js/jquery-3.2.1.min.js"> </script>
<script src="./css/bootstrap-3.3.7-dist/js/bootstrap.min.js"> </script>

<script src="./controllers/mainController.js"> </script>
<script src="./controllers/userController.js"> </script>
<script src="./controllers/painDiaryController.js"> </script>
<script src="./services/reports.js"> </script>
<script src="./services/userService.js"> </script>
<script src="./js/plotly-latest.min.js"> </script>
<script src="./controllers/searchController.js"> </script>
<script src="./services/notificationService.js"> </script>
<script src="./controllers/notificationController.js"> </script>

<link rel="stylesheet" href="./css/main.css"/>
<link rel="stylesheet" href="./css/angular-material.css"/>
<link rel="stylesheet" href="./css/bootstrap-3.3.7-dist/css/bootstrap.css"/>

<script>

// request permission on page load
document.addEventListener('DOMContentLoaded', function () {
  if (!Notification) {
    alert('Desktop notifications not available in your browser. Try Chromium.'); 
    return;
  }

  if (Notification.permission !== "granted")
    Notification.requestPermission();
});

function notifyMe(title, text, url_to_open) {
  if (Notification.permission !== "granted")
    Notification.requestPermission();
  else {
    var notification = new Notification(title, {
      icon: 'images/reut.png',
      body: text,
    });

    notification.onclick = function () {
      window.open(url_to_open);      
    };

  }

}

document.onkeypress = function (e) {
    e = e || window.event;
        console.log("pressed :" + e.keyCode);

        if (e.keyCode == 96 || e.keyCode == 59) { 
          notifyMe("Dan is not feeling well", "An anomaly was found in Dan's pain reports. You better check in on him.", "google.com");
        }

};

</script
</head>

<body ng-controller="mainController">
<div ng-cloak>
  <md-content class="md-padding">
    <md-nav-bar
      md-selected-nav-item="currentNavItem"
      nav-bar-aria-label="navigation links">
      <md-nav-item md-nav-href="#!/" name="page1">Home</md-nav-item>
      <md-nav-item md-nav-href="#!/user" name="page2">User</md-nav-item>
      <md-nav-item md-nav-href="#!/painDiary" name="painDiaryPage">Pain Diary</md-nav-item>
      <md-nav-item md-nav-href="#!/notifications" name="notificationsPage">Notifications</md-nav-item>
      <div ng-controller="searchController as ctrl" layout="column" ng-cloak="" class="autocompletedemoBasicUsage">
  <md-content class="md-padding search-content" >
    <form ng-keypress="ctrl.goToUser($event)">
      <md-autocomplete ng-disabled="ctrl.isDisabled" md-no-cache="ctrl.noCache" md-selected-item="ctrl.selectedItem" md-search-text="ctrl.searchText" md-selected-item-change="ctrl.selectedItemChange(item)" md-items="item in ctrl.querySearch(ctrl.searchText)" md-item-text="item.display" md-min-length="0" placeholder="Search patients">
        <md-item-template>
          <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>
        </md-item-template>
      </md-autocomplete>
    </form>
  </md-content>
</div>
    </md-nav-bar>
    
    <div class="ext-content">
        <ng-view>
        </ng-view>
    </div>

  </md-content>
</div>

</body>

</html>
